<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
  <head>
    <title>Frequently Pasted Answers</title>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <style type="text/css">
      html { background-color: #666; font-size: medium; }
      body { margin: 1em 2em; padding: 0; }
      ul { display: block; background-color: #444; margin: 0; padding: 1ex; border-radius: 5px; font-family: "DejaVu Sans", "Trebuchet MS", "Droid Sans", Helvetica, sans-serif; }
      li { display: inline-block; border-left: medium solid #AAA; padding: 0; margin: 0; color: white; }
      li:first-child { border-left: none; }
      li span { margin: 0 1ex; padding: .25ex .5ex; border-radius: 2px; font-weight: normal; font-size: 90%; line-height: 150%; }
      li span:hover { background-color: #AAA; color: black; }
      li span a:link, li span a:visited { color: inherit; text-decoration: none; }
      h1 { color: #DDD; font-weight: normal; font-size: xx-large; font-style: italic; border-bottom: medium dotted #DDD;
           margin: 1em 0 1ex 0; padding: 0 0 .25ex 0; }
      h2 { color: #DDD; font-size: large;  border-bottom: thin solid #DDD; margin: 2em 0 1em 0; padding: 0 0 1ex 0; display: inline-block; }
      p { color: #DFDFDF; line-height: 150%; margin: 0; padding: 0; }
      div.listing, code { font-family: "DejaVu Sans Mono", Consolas, Courier, monospace; }
      div.listing { border-radius: 5px; margin: 1em 0; padding: 1em; background-color: #EEE; white-space: pre; line-height: 135%; }
      code { margin: 0 .5ex; }
    </style>
  </head>

  <body>
    <ul>
      <li><span>Perspective</span></li>
      <li><span>Intuition</span></li>
      <li><span>Video</span></li>
      <li><span>Links</span></li>
      <li><span><a href="#getline">getline</a></span></li>
      <li><span><a href="#random">random</a></span></li>
      <li><span><a href="#new">new/delete</a></span></li>
    </ul>

    <h1>To C++ and Beyond</h1>
    <p>The following pieces of code come up again and again and again.</p>

    <h2><a name="getline">Line-based input parsing</a></h2>
    <div class="listing"><![CDATA[#include <fstream>
#include <sstream>
#include <string>

int main()
{
    std::ifstream infile("thefile.txt");
    std::string line;

    while (std::getline(infile, line))
    {
        // process line, e.g.:

        std::istringstream iss(line);
        int n; double d; std::string s;

        if (iss >> n >> d >> s)
        {
            // process tokens
        }
    }
}]]></div>

    <h2><a name="random">Random number generation</a></h2>

    <div class="listing"><![CDATA[#include <random>

typedef std:::mt19937 rng_type;
std::uniform_int_distribution<rng_type::result_type> udist(0, 200);

rng_type rng;

int main()
{
  // seed rng first:
  rng_type::result_type const seedval = get_seed();
  rng.seed(seedval);

  rng_type::result_type random_number = udist(rng);

  return random_number;
}]]></div>

    <h2><a name="new">Replacing operators new and delete</a></h2>

    <div class="listing"><![CDATA[void * operator new(std::size_t n) throw(std::bad_alloc)
{
    void * const p = std::malloc(p);

    if (!p) throw std::bad_alloc();

    return p;
}

void operator delete(void * p) throw()
{
    std::free(p);
}]]></div>

    <p>In C++11, the exception specifications change to &ldquo;none&rdquo; for
    <code>operator new()</code> and to <code>noexcept</code> for <code>operator delete()</code>.</p>

  </body>
</html>
